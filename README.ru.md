# Agnitio create presentation helper
Это полотнище кода призвано (частично) избавить divелопера от рутины при создании новой презентации для платформы Agnitio Rainmaker.
## Установка
```bash
git clone git://github.com/randomnf/ag-create-helper ag-create-helper
cd ag-create-helper
rm -rf .git
npm i
```
## Мини-документация
Структура презентации описывается в `json` файле, по которому будут генерироваться файлы и папки для слайдов (по шаблонам), файл `presentation.json` и простое одноуровневое меню (пока только одноуровневое). Шаблоны слайдов лежат в папке `./slide-templates`, подстановка данных в шаблоны осуществляется с помощью плагина `gulp-file-include`.
## Создание презентации с нуля
Если презентация создается с нуля, нужно заполнить файл `slidesCreate.json` и запустить задачу `gulp create` в консоли.
## Добавление новых слайдов в существующую презентацию
Если в презентации уже присутствуют сверстанные слайды и нужно нагенерить n-ное количество новых файлов, нужно заполнить файл `slidesInsert.json` и запустить задачу `gulp insert` в консоли.
### Описание структуры slidesCreate.json
Данным файлом следует пользоваться в том случае, если презентация создается с нуля.
Пример содержимого файла
```json
{
    "commonConfig": {
        "slideNamePrefix": "slide-",
        "slideNamePostfix": "--productName",
        "slideNumStart": 5,
        "slideNumStep": 5,
        "slideNumLen": 3,

        "generateMenu": true
    },

    "sections": {
        "visit": {
            "title": "Название раздела",
            "slides": [
                {
                    "slideDesc": "Описание слайда для статистики"
                },
                {
                    "customID": "email",
                    "content": {
                        "popups": 3
                    },
                    "slideDesc": "Описание слайда для статистики"
                },
                {
                    "content": {
                        "tabs": 2
                    },
                    "slideDesc": "Описание слайда для статистики"
                }
            ]
        }
    }
}
```
Из такого `json`-файла будут созданы следующие слайды:
- slide-005--productName
- slide-010--productName (с двумя табами)
- slide-email--productName (с тремя попапами)

В объекте `commonConfig` описывается общий для презентации конфиг:
- `slideNamePrefix` - префикс для имени слайда, по умолчанию `"slide-"`
- `slideNamePostfix` - постфикс для имени слайда, по умолчанию отсутствует
- `slideNumStart` - начальный номер слайдов, по умолчанию `5`
- `slideNumStep` - шаг, с которым увеличивается нумерация слайдов, по умолчанию `5`
- `slideNumLen` - количество символов, которое отводится под номер слайда, по умолчанию `3`; номер слайда будет дополняться ведущими нулями до соответсвия количеству символов, указанному в этом свойстве. Например, номер слайда `20` при `slideNumLen = 4`, будет преобразован к виду `"0020"`.

В объекте `sections` описываются все разделы презентации:
```json
"sectionName": {
    "title": "Название раздела",
    "slides": []
}
```
- `sectionName` - служебное имя раздела, которое будет указано в `presentation.json`
- `title` - человекочитаемое название раздела, которое также используется при генерации меню
- `slides` - массив с объектами, которые описывают слайд.

В объектах `slides` описываются слайды, принадлежащие разделу `section`, в который они вложены:
```json
{
    "customID": "video",
    "content": {
        "popups": 2,
        "tabs": 3
    },
    "slideDesc": "Описание для статистики"
}
```
- `customID` - если указано, вместо номера слайда будет вставлено значение из этого поля
- `content` - если указан, в этом объекте следует указать количество попапов `popups` и табов `tabs`, если таковые присутствуют на слайде
- `slideDesc` - описание для статистики

Также есть возможность вместо массива объектов с описаниями слайдов указать количество слайдов в разделе:
```json
"sectionName": {
    "title": "Название раздела",
    "slides": 3
}
```
В таком случае будут созданы 3 слайда. Описание слайда для статисики в `presentation.json` будет пустым.
### Описание структуры slidesInsert.json
Данным файлом следует пользоваться в том случае, если нужно добавить новые слайды в уже существующую презентацию.

Структура файла полностью аналогична файлу `slidesCreate.json`, за исключением того, что опускается свойство `generateMenu` в объекте `commonConfig`.

После создания слайдов через команду `gulp insert`, данные для `presentation.json` по этим слайдам будут лежать в папке `./copy-paste-torture`. Да, нужно будет зайти в файлик и мучительно копировать все руками =/